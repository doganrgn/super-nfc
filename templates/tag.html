{% extends "base.html" %}
{% block content %}
{% set p = profile or {} %}
{% set color = (p.theme_color if p.theme_color else '#2563eb') %}
<!-- // CODEx: Profil kartında yeni alanları gösteriyoruz -->
<style>
  .profile-header { background: {{ color }}; color: #fff; }
  .profile-header h3 { margin: 0; }
  .profile-avatar { width: 128px; height: 128px; border-radius: 50%; object-fit: cover; border: 4px solid #fff; box-shadow: 0 8px 24px rgba(0,0,0,.18); }
  .contact-item { display:flex; align-items:center; gap:.75rem; padding:.5rem 0; border-bottom:1px solid #f1f5f9; }
  .contact-item:last-child { border-bottom:none; }
  .contact-item i { font-size:1.25rem; color: {{ color }}; }
</style>

<div class="row justify-content-center">
  <div class="col-12 col-lg-8">
    <div class="card shadow-sm overflow-hidden">
      <div class="profile-header p-4 text-center">
        {% if p.image_url %}
          <img src="{{ p.image_url }}" alt="Profil görseli" class="profile-avatar mb-3">
        {% endif %}
        <h3>{{ p.full_name or p.title or 'Aktive Edilmemiş Tag' }}</h3>
        {% if p.title %}
          <p class="mb-0">{{ p.title }}</p>
        {% endif %}
      </div>

      <div class="card-body p-4">
        {% if p.description %}
          <p class="mb-4">{{ p.description }}</p>
        {% else %}
          <div class="alert alert-info">Bu profil henüz doldurulmamış. Etiket sahibinin bilgileri yakında burada yer alacak.</div>
        {% endif %}

        <div class="contact-list">
          {% if p.link %}
            <div class="contact-item">
              <i class="bi bi-link-45deg"></i>
              <a href="{{ p.link }}" target="_blank" rel="noopener">Web Sitesi</a>
            </div>
          {% endif %}
          {% if p.public_email %}
            <div class="contact-item">
              <i class="bi bi-envelope"></i>
              <a href="mailto:{{ p.public_email }}">{{ p.public_email }}</a>
            </div>
          {% endif %}
          {% if p.phone %}
            <div class="contact-item">
              <i class="bi bi-telephone"></i>
              <a href="tel:{{ p.phone }}">{{ p.phone }}</a>
            </div>
          {% endif %}
          {% if p.whatsapp %}
            <div class="contact-item">
              <i class="bi bi-whatsapp"></i>
              <a href="https://wa.me/{{ p.whatsapp|replace('+', '') }}" target="_blank" rel="noopener">WhatsApp</a>
            </div>
          {% endif %}
          {% if p.instagram %}
            <div class="contact-item">
              <i class="bi bi-instagram"></i>
              <a href="{{ p.instagram }}" target="_blank" rel="noopener">Instagram</a>
            </div>
          {% endif %}
          {% if p.facebook %}
            <div class="contact-item">
              <i class="bi bi-facebook"></i>
              <a href="{{ p.facebook }}" target="_blank" rel="noopener">Facebook</a>
            </div>
          {% endif %}
          {% if p.linkedin %}
            <div class="contact-item">
              <i class="bi bi-linkedin"></i>
              <a href="{{ p.linkedin }}" target="_blank" rel="noopener">LinkedIn</a>
            </div>
          {% endif %}
          {% if p.iban %}
            <div class="contact-item">
              <i class="bi bi-bank"></i>
              <span>{{ p.iban }}</span>
            </div>
          {% endif %}
        </div>

        <div class="d-flex flex-wrap gap-2 mt-4">
          <a href="/claim-info/{{ tag_id }}" class="btn btn-outline-secondary">Bu Tag'i Sahiplen</a>
          <a href="/qr/{{ tag_id }}" class="btn btn-outline-secondary" target="_blank" rel="noopener"><i class="bi bi-qr-code"></i> QR</a>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
